/**
* slidingp.desk.min.js v1.0 23/04/2013
* Copyright © 2013,Thaddeus Hieronymus <thaddeus.t8@bol.com.br>
*/
var xc,g,m,nb,x,y,l,c,N=4,mN=15;function pSC(){if(event.button==2||event.button==3){oncontextmenu='return false';}}document.onmousedown=pSC;document.oncontextmenu=new Function("return false;");function dS(){for(var i=0,ex=0;i<N;i++,ex+=100){for(var j=0,ey=0;j<N;j++,ey+=100){if(g[i][j]!=0){xc.fillStyle="lightyellow";}else{xc.fillStyle="white";}xc.fillRect(ey,ex,100,100);
xc.strokeStyle="orange";xc.strokeRect(ey,ex,100,100);if(g[i][j]!=0){xc.fillStyle="black";xc.font='italic bold 60px sans-serif';xc.textAlign='rigth';if(g[i][j]<10){xc.fillText(g[i][j],ey+30,ex+70);}else{xc.fillText(g[i][j],ey+15,ex+70);}}}}document.getElementById("moves").innerHTML="<p>Moves: "+ m +"</p>";}function vf(num){for(var i=0;i<mN;i++){if(nb[i]==num)return 1;}
return 0;}function ic(){m=0;nb=new Array(mN);for(var i=0;i<mN;i++)nb[i]=0;g=new Array(N);for(var i=0,v=0;i<N;i++){g[i]=new Array(N);for(var j=0;j<N;j++){if((i!=N-1)||(j!=N-1)){var nm;do{nm=parseInt((Math.random()*mN)+1);}while(vf(nm));nb[v++]=g[i][j]=nm;}else{g[N-1][N-1]=0;}}}}function it(){var vc=document.getElementById('canvas');xc=vc.getContext('2d');
vc.addEventListener("mousedown",dp,false);ic();dS();}function pM(){for(var i=0,ey=0;i<N;i++,ey+=100){for(var j=0,ex=0;j<N;j++,ex+=100){if((x>ex && x<(ex+100))&&(y>ey && y <(ey+100))){l=i,c=j;return;}}}}function pN(nm){for(var i=0;i<N;i++){for(var j=0;j<N;j++){if((!g[i][j])&&(((l==i)&&(c==j+1||c==j-1))||((c==j)&&(l==i+1||l==i-1)))){g[i][j]=nm;g[l][c]=0;m++;dS();
break;}}}}function mM(){if(g[l][c]){pN(g[l][c]);}}function vW(){var v=1;for(var i=0;i<N;i++){for(var j=0;j<N;j++){if(i!=N-1||j!=N-1){if(g[i][j]!=v)return 0;v++;}}}return 1;}function dG(){mM();if(vW()){alert('Parabens!');it();}}function tCX(vc,e){var posx=0;if(e.pageX){posx=e.pageX;}else if(e.clientX){posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;}
return posx-=vc.offsetLeft;}function tCY(vc,e){var posy=0;if(e.pageY){posy=e.pageY;}else if(e.clientY){posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop;}return posy-=vc.offsetTop;}function dp(e){x=tCX(this,e);y=tCY(this,e);pM();dG();}
